# StoreHouseStock_Maintain 操作邏輯說明

## 1. 功能目的
StoreHouseStock_Maintain 用於成品倉庫存量資料的新增、查詢、修改與刪除，確保庫存資訊正確、即時。

## 2. 操作流程

### 2.1 查詢庫存
- 使用者可依據條件（如品號、倉庫、批號、狀態等）查詢現有庫存資料。
- 查詢結果以表格顯示，支援分頁與排序。

### 2.2 新增庫存資料
- 點擊「新增」按鈕，開啟庫存資料編輯視窗。
- 輸入必要欄位（品號、倉庫、數量、批號、有效日期等）。
- 按下「儲存」後，系統進行欄位驗證，通過則寫入資料庫。
- 新增成功後自動回到查詢頁並顯示最新資料。

### 2.3 編輯庫存資料
- 在查詢結果中選擇欲編輯之資料，點擊「編輯」按鈕。
- 開啟編輯視窗，允許修改數量、狀態、有效日期等欄位。
- 按下「儲存」後，系統驗證並更新資料庫。
- 編輯成功後回到查詢頁。

### 2.4 刪除庫存資料
- 在查詢結果中選擇欲刪除之資料，點擊「刪除」按鈕。
- 系統跳出確認視窗，確認後執行刪除。
- 刪除後自動重新整理查詢結果。

## 3. 欄位說明
| 欄位名稱   | 說明         | 必填 | 格式/限制           |
|------------|--------------|------|---------------------|
| 品號       | 產品編號     | 是   | 英數字，不可重複    |
| 倉庫       | 倉庫代碼     | 是   | 下拉選單            |
| 數量       | 庫存數量     | 是   | 正整數              |
| 批號       | 批次編號     | 否   | 英數字              |
| 有效日期   | 有效期限     | 否   | yyyy-MM-dd          |
| 狀態       | 庫存狀態     | 是   | 正常/凍結/報廢等    |
| 建立人員   | 建立者帳號   | 系統 | 自動帶入            |
| 建立時間   | 建立時間     | 系統 | 自動產生            |
| 修改人員   | 最後修改者   | 系統 | 自動帶入            |
| 修改時間   | 最後修改時間 | 系統 | 自動產生            |

## 4. 權限與驗證
- 僅有具備「庫存維護」權限之使用者可執行新增、編輯、刪除。
- 查詢功能對所有登入使用者開放。
- 欄位驗證：必填欄位不得為空，數量須為正整數，日期格式須正確。
- 權限不足時，操作按鈕自動隱藏或顯示提示訊息。

## 5. 異常處理
- 欄位驗證失敗時，顯示對應錯誤訊息並阻止送出。
- 資料庫寫入失敗時，顯示「儲存失敗，請聯絡管理員」等提示。
- 刪除時若資料已被他人異動，顯示「資料已更新，請重新查詢」並阻止刪除。

## 6. 介面行為
- 查詢結果支援分頁、排序、關鍵字快速搜尋。
- 新增/編輯/刪除操作皆以 modal 視窗進行，操作完成自動關閉並回到查詢頁。
- 操作成功時顯示「操作成功」提示。

## 7. 其他說明
- 所有異動皆需記錄操作人員與時間，供稽核追蹤。
- 支援多語系顯示（預設為繁體中文）。

---
**備註**：如需更詳細的 API 或資料表結構，請參考相關技術文件。
